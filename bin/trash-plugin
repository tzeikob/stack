#!/usr/bin/env bash

shopt -s nocasematch

clear

loop="true"

while [[ $loop = "true" ]]; do
  clear
  trash-list
  echo ""

  echo -e "Which trash operation to apply?"
  read -p "(r)estore re(m)ove (e)mpty (q)uit: " reply

  while [[ ! $reply =~ ^(r|m|e|q)$ ]]; do
    read -p "Please enter a valid operation: " reply
  done

  echo ""

  if [[ $reply == "q" ]]; then
    loop="false"
  elif [[ $reply == "r" ]]; then
    trash-restore
  elif [[ $reply == "m" ]]; then
    read -p "Enter the file(s) to remove (blank to cancel): " files

    if [[ ! -z $files ]]; then
      read -p "File(s) will be gone forever, proceed? (y/N) " reply
      reply=${reply:-"no"}

      if [[ $reply =~ ^(yes|y)$ ]]; then
        trash-rm $files
      fi
    fi
  elif [[ $reply == "e" ]]; then
    trash-empty
  fi

  echo ""
done

clear
