#!/usr/bin/env bash

clear

loop="true"

while [[ $loop = "true" ]]; do
  trash-list

  echo -e "Apply a trash operation"
  read -p "(r)estore re(m)ove (e)mpty (q)uit: " reply

  while [[ ! $reply =~ ^(r|m|e|q)$ ]]; do
    read -p "Please enter a valid operation: " reply
  done

  echo ""

  if [[ $reply == "q" ]]; then
    loop="false"
  elif [[ $reply == "r" ]]; then
    trash-restore
  elif [[ $reply == "m" ]]; then
    read -p "Enter the file(s) to remove (blank to cancel): " files

    if [[ ! -z $files ]]; then
      trash-rm $files
    fi
  elif [[ $reply == "e" ]]; then
    trash-empty
  fi

  echo ""
done

clear
